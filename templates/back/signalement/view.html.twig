{% extends 'back/base_bo.html.twig' %}

{% block content %}
    <section class="fr-p-5v">
        <header>
            <h1 class="fr-h2 fr-mb-3v">Signalement #{{ signalement.reference }}</h1>
            {% if signalement.isNotOccupant %}
                <small class="fr-background-contrast--red-marianne fr-text-default--error fr-rounded fr-p-1v fr-text--bold fr-fi-information-fill fr-link--icon-right fr-pr-3v">&nbsp;
                    Signalement par un tiers</small>
            {% else %}
                <small class="fr-background-alt--blue-france fr-text-label--blue-france fr-rounded fr-p-1v fr-text--bold fr-fi-information-fill fr-link--icon-right fr-pr-3v">&nbsp;
                    Signalement par l'occupant</small>
            {% endif %}
            <text><strong>Déposé le:</strong> {{ signalement.createdAt|date('d/m/Y à H:i') }}</text>
        </header>
        <hr>
        {# {{ dump(signalement) }} #}
        <div class="fr-grid-row">
            <div class="fr-col-6">
               {% if signalement.isNotOccupant %}
                <strong class="fr-fi-information-fill fr-text-label--blue-france"> Informations du déclarant</strong>
                   <span class="fr-hint-text">Ce signalement à été effectué par un tiers, les informations du déclarant sont les suivantes.</span>
                <ul class="fr-list--icon-img">
                    <li><strong>Nom: </strong> {{ signalement.nomDeclarant }} - <strong>Prénom: </strong> {{ signalement.prenomDeclarant }}</li>
                    <li><strong>Courriel: </strong><a href="mailto:{{ signalement.mailDeclarant }}">{{ signalement.mailDeclarant }}</a></li>
                    <li><strong>Téléphone: </strong>{{ signalement.telDeclarant }}</li>
                    <li><strong>Structure: </strong> {{ signalement.structureDeclarant}}</li>
                </ul>
                {% endif %}
                <strong class="fr-fi-information-fill fr-text-label--blue-france"> Informations de l'occupant</strong>
                <span class="fr-hint-text">Ce signalement à été effectué par l'occupant du logement, les informations fournies sont les suivantes.</span>
                <ul class="fr-list--icon-img">
                    <li><strong>Nom: </strong> {{ signalement.nomOccupant }} - <strong>Prénom: </strong> {{ signalement.prenomOccupant }}</li>
                    <li><strong>Courriel: </strong><a href="mailto:{{ signalement.mailOccupant }}">{{ signalement.mailOccupant }}</a></li>
                    <li><strong>Téléphone: </strong><a href="tel:{{ signalement.telOccupant }}">{{ signalement.telOccupant }}</a></li>
                    <li><strong>Adresse: </strong> {{ signalement.adresseOccupant ~', '~signalement.cpOccupant ~' '~ signalement.villeOccupant|upper}}</li>
                    <li>
                        <div class="fr-responsive-img">
                            <img src="https://via.placeholder.com/500x300.png?text=Maps" alt="Maps" class="fr-rounded fr-mt-5v">
                        </div>
                    </li>
                </ul>
            </div>
            <div class="fr-col-6">
                <strong class="fr-fi-alert-fill fr-text-label--blue-france"> Criticité du signalement</strong>
                <span class="fr-hint-text">La criticité est calculée automatiquement en fonction des situations signalées.</span>
                <ul class="fr-list--icon-img">
                    <li><strong>Nom: </strong> {{ signalement.nomProprio }}
                    <li><strong>Courriel: </strong><a href="mailto:{{ signalement.mailProprio }}">{{ signalement.mailProprio }}</a></li>
                    <li><strong>Téléphone: </strong><a href="tel:{{ signalement.telProprio }}">{{ signalement.telProprio }}</a></li>
                    <li><strong>Adresse: </strong> {{ signalement.adresseProprio }}</li>
                </ul>
                <strong class="fr-fi-alert-fill fr-text-label--blue-france"> Ce signalement concerne les points suivants:</strong>
                <span class="fr-hint-text">Récapitulatif des situations rencontrées par l'occupant du logement</span>
                <ul class="fr-list--icon-img">
                    {% for situation in signalement.jsonContent %}
                        <li class="fr-background-alt--blue-france fr-mb-5v fr-p-5v fr-rounded">
                            <strong>{{ situation.label|capitalize }}</strong>
                            <ul>
                                {% for critere in situation.critere %}
                                    <li><strong>{{ critere.label|capitalize }}</strong>
                                        <ul class="fr-list fr-skiplinks__list fr-list--icon-img">
                                            {% for criticite in critere.criticite %}
                                                <li><img src="{{ asset('img/s'~criticite.score~'.png') }}"
                                                         alt="Criticite" width="20"> - {{ criticite.label|capitalize }}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                {% endfor %}
                            </ul>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <hr>
        <div class="fr-grid-row">
            <div class="fr-col-6">
                <strong class="fr-fi-information-fill fr-text-label--blue-france"> Informations du propriétaire</strong>
                <span class="fr-hint-text">Ci-dessous les informations concernant le proprétaire ou gestionnaire bailleur du logement, vous pouvez les compléter si nécessaire.</span>
                <ul class="fr-list--icon-img">
                    <li>
                        <strong>Propriétaire averti ?:</strong>
                        {% if signalement.isProprioAverti %}
                            <small class="fr-background-alt--blue-france fr-text-label--blue-france fr-rounded fr-p-1v fr-text--bold fr-fi-checkbox-circle-fill fr-link--icon-right fr-pr-3v">&nbsp;
                                Oui</small>
                        {% else %}
                            <small class="fr-background-contrast--red-marianne fr-text-default--error fr-rounded fr-p-1v fr-text--bold fr-fi-close-circle-fill fr-link--icon-right fr-pr-3v">&nbsp;
                                Non</small>
                        {% endif %}
                    </li>
                    <li><strong>Nom: </strong> {{ signalement.nomProprio ?? 'N/R' }}
                    <li><strong>Courriel: </strong><a href="mailto:{{ signalement.mailProprio }}">{{ signalement.mailProprio ?? 'N/R'  }}</a></li>
                    <li><strong>Téléphone: </strong><a href="tel:{{ signalement.telProprio }}">{{ signalement.telProprio ?? 'N/R'  }}</a></li>
                    <li><strong>Adresse: </strong> {{ signalement.adresseProprio ?? 'N/R'  }}</li>
                </ul>
            </div>
        </div>
    </section>
{% endblock %}